<!doctype html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" />
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <!-- MDUI CSS -->
    <link rel="stylesheet" href="./css/mdui.min.css" />
    <title>demo</title>
</head>

<body class="mdui-appbar-with-toolbar mdui-drawer-body-left">
    <header class="mdui-theme-primary-indigo mdui-theme-accent-pink">
        <div class="mdui-appbar mdui-appbar-fixed">
            <div class="mdui-toolbar mdui-color-theme">
                <a href="#" class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '.mdui-drawer'}"><i class="mdui-icon material-icons">menu</i></a>
                <span class="mdui-typo-title">demo</span>
                <div class="mdui-toolbar-spacer"></div>
                <img src="./images/avatar.png" class="mdui-img-fluid mdui-img-circle" mdui-tooltip="{content:'未登录'}">
                <a href="javascript:;" class="mdui-btn mdui-btn-icon" mdui-menu="{target: '#dropbar'}"><i class="mdui-icon material-icons">more_vert</i></a>
                <ul class="mdui-menu mdui-menu-cascade" id="dropbar">
                    <li class="mdui-menu-item" disabled>
                        <a href="javascript:;">未登录</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="mdui-drawer">
            <div class="mdui-list">
                <a href="./index.html" class="mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-blue">home</i>
                    <div class="mdui-list-item-content">欢迎</div>
                </a>
                <a href="./login.html" class="mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-teal-500">account_box</i>
                    <div class="mdui-list-item-content">登录</div>
                </a>
                <a href="./register.html" class="mdui-list-item mdui-list-item-active mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-orange-500">assignment_ind</i>
                    <div class="mdui-list-item-content">注册</div>
                </a>
                <a href="./about.html" class="mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-red-a100">description</i>
                    <div class="mdui-list-item-content">关于</div>
                </a>
            </div>
        </div>
    </header>
    <main>
        <div class="mdui-container">
            <div class="mdui-row">
                <div class="mdui-col-offset-xs-3 mdui-col-xs-6">
                    <div class="mdui-container">
                        <div class="mdui-row">
                            <div class="mdui-typo mdui-text-center">
                                <h4>用户注册</h4>
                            </div>
                        </div>
                        <form action="." method="post">
                            <div class="mdui-row">
                                <div class="mdui-textfield">
                                    <label class="mdui-textfield-label">用户名</label>
                                    <input class="mdui-textfield-input" name="name" id="name" type="text" />
                                    <div class="mdui-textfield-error">用户名不能为空</div>
                                    <div class="mdui-textfield-helper">用于论坛内显示的用户名</div>
                                </div>
                            </div>
                            <div class="mdui-row">
                                <div class="mdui-textfield">
                                    <label class="mdui-textfield-label">帐号</label>
                                    <input class="mdui-textfield-input" name="account" id="account" type="text" />
                                    <div class="mdui-textfield-error">帐号长度必须大于6个字符</div>
                                    <div class="mdui-textfield-helper">用于登陆的帐号</div>
                                </div>
                            </div>
                            <div class="mdui-row">
                                <div class="mdui-textfield">
                                    <label class="mdui-textfield-label">密码</label>
                                    <input class="mdui-textfield-input" name="password" id="password" type="password" />
                                    <div class="mdui-textfield-error">密码长度必须大于6个字符</div>
                                    <div class="mdui-textfield-helper">登陆密码</div>
                                </div>
                            </div>
                            <div class="mdui-row">
                                <div class="mdui-textfield mdui-textfield-has-bottom">
                                    <label class="mdui-textfield-label">密码</label>
                                    <input class="mdui-textfield-input" name="repeatPassword" id="repeatPassword" type="password" />
                                    <div class="mdui-textfield-error">密码与上次输入不一致</div>
                                    <div class="mdui-textfield-helper">再次输入密码</div>
                                </div>
                            </div>
                            <div class="mdui-row">
                                <input id="submit" type="submit" value="注册" onclick="return check()" class="mdui-btn mdui-btn-block mdui-color-indigo-accent">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <!-- MDUI JavaScript -->
        <script src="./js/mdui.min.js"></script>
        <script>
            let $ = mdui.$

            function checkName(obj) {
                let father = obj.parent()
                let name = String(obj.val())
                if (name.length === 0) {
                    father.addClass('mdui-textfield-invalid')
                    return false
                }
                father.removeClass('mdui-textfield-invalid')
                return true
            }

            function checkAccount(obj) {
                let father = obj.parent()
                let account = String(obj.val())
                if (account.length <= 6) {
                    father.addClass('mdui-textfield-invalid')
                    return false
                }
                father.removeClass('mdui-textfield-invalid')
                return true
            }

            function checkFirstPassword(obj) {
                let father = obj.parent()
                let password = String(obj.val())
                if (password.length <= 6) {
                    father.addClass('mdui-textfield-invalid')
                    return false
                }
                father.removeClass('mdui-textfield-invalid')
                return true
            }

            function checkSecondPassword(obj) {
                let father = obj.parent()
                let next = obj.next()
                let password = String(obj.val())
                if (password.length <= 6) {
                    next.text("密码长度必须大于6个字符")
                    father.addClass('mdui-textfield-invalid')
                    return false
                }
                let firstPassword = String($('#password').val())
                if (firstPassword !== password) {
                    next.text("密码与上次输入不一致")
                    father.addClass('mdui-textfield-invalid')
                    return false
                }
                father.removeClass('mdui-textfield-invalid')
                return true
            }

            function check() {
                let na = checkName($('#name'))
                let ac = checkAccount($('#account'))
                let fi = checkFirstPassword($('#password'))
                let se = checkSecondPassword($('#repeatPassword'))
                if (na && ac && fi && se) {
                    alert("通过检测")
                } else {
                    alert("未通过检测")
                }
                return na && ac && fi && se
            }
            $('#name').on('change', function(e) {
                checkName($(this))
            })
            $('#account').on('change', function(e) {
                checkAccount($(this))
            })
            $('#password').on('change', function(e) {
                checkFirstPassword($(this))
            })
            $('#repeatPassword').on('change', function(e) {
                checkSecondPassword($(this))
            })
        </script>
    </footer>
</body>

</html>